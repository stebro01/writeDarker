<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
    	integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">

    <!-- MAIN CSS -->
    <link rel="stylesheet" href="myStyle.css">


    <title>Scientific Writer</title>
    </head>

    <body>
		<div class="bg_image">
			<img src="img/background1.jpg" alt="">
		</div>

    	<!-- NAVBAR -->
    	<nav class="navbar navbar_swTOP navbar-expand navbar-dark bg-dark">
    		<a class="navbar-brand" href="#">HOME</a>

    		<div class="collapse navbar-collapse" id="navbarText">
    			<ul class="navbar-nav mr-auto">
    				<li class="nav-item active"></li>
    				<div class="btn-group float-left">
    					<button id="btnMenuWindows" type="button" class="btn btn-dark"><img src="img/logo_window.png"
    							height="20px"></button>
    				</div>
    				</li>
    			</ul>

    			<button id="btnMenuWords" type="button" class="btn btn-dark float-right"><img src="img/logoFont.png"
    					height="20px"></button>
    			<button id="btnMenuOptions" type="button" class="btn btn-dark float-right"><img src="img/logoOpt.png"
    					height="20px"></button>
    		</div>
    	</nav>
    	<!-- /NAVBAR -->

    	<!-- STATUSBAR -->
    	<div class="container" id="swStatusFeld">
    		Das ist das Statusfeld [#swStatusFeld]
    	</div>
    	<!-- /STATUSBAR -->

    	<div id="PositionForMenu"></div>

    	<!-- MAINWINDOW -->
    	<div class="container-fluid">
    		<div id="swMainRow" class="row">
    			<!-- PROJECT VIEW -->
    			<div id="swColMainProject" class="col-sm-2">
    				<div class="swColMain_H1">Project
    					<div class="btn-group float-right">
    						<button id="swColProjClose" class="btnNav">X</button>
    						<button id="swColProjBig" class="btnNav">></button>
    					</div>
    				</div>
    				CONTENT
				</div>
				
    			<!-- NAVIGATOR VIEW -->
    			<div id="swColMainNav" class="col-sm-2">
    				<div class="swColMain_H1">
    					Navigation
    					<div class="btn-group float-right">
    						<button id="swColNavClose" class="btnNav">X</button>
    						<button id="swColNavBig" class="btnNav">></button>
    					</div>
					</div>
					CONTENT
					<button id="btnNavUpdate">UPDATE</button>
					<div id="swNavList">

					</div>
    			</div>

    			<!-- EDITOR VIEW -->
    			<div id="swColMainEditor" class="col-sm-6 scrollableCol">
					<div class="swColMain_H1">Editor
							<button id = "btnNewText" class="btnNav float-right">NEU</button>
					</div>
					<div id="swContent">
							<div id="swContent_X" class="swContentBlock" style="display:none">
									<button tabindex=-1 class="btnNav btnHideContent">▲</button>
									<span contenteditable="true" class="swText_H1">Template</span>
									<button tabindex=-1  class="btnNav btnRemoveContent float-right">X</button>
									<div contenteditable="true" class="swText_Feld">
										...
									</div>
								</div>
						<div id="swContent_1" class="swContentBlock">
							<button tabindex=-1  class="btnNav btnHideContent">▲</button>
							<span contenteditable="true" class="swText_H1">H1</span>
							<button tabindex=-1 class="btnNav btnRemoveContent float-right">X</button>
							<div contenteditable="true" class="swText_Feld">

								Ut imperdiet metus ac sem placerat, nec lacinia nulla dapibus. Maecenas accumsan enim ac urna
								suscipit
								pulvinar. Nulla vel elit mattis, fringilla dolor at, pharetra neque.</p>

								Ut imperdiet metus ac sem placerat, nec lacinia nulla dapibus. Maecenas accumsan enim ac urna
								suscipit
								pulvinar. Nulla vel elit mattis, fringilla dolor at, pharetra neque.</p>
							</div>
						</div>
					</div>
				</div>

    			<!-- NAVIGATOR VIEW -->
    			<div id="swColMainOptions" class="col-sm-2 scrollableCol">
					<div class="swColMain_H1" style="text-align:center">
							<button id="swColOptBig" class="btnNav float-left"><</button>
							Options
								<button id="swColOptClose" class="btnNav float-right">X</button>							 
					</div> 
					CONTENT
				</div> 
			</div> 
		</div> 
		<!-- /MAINWINDOW -->


<footer >
		<nav id = "swBottomNav" class="navbar navbar-expand-sm navbar-dark bg-dark fixed-bottom">
				<!-- Navbar content -->
				Informationen:
			</nav>
</footer>

    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
	
    <!-- Optional JavaScript -->
	<script>
		var OPTIONS = new Object()
		OPTIONS.colProjWidth = 2;
		OPTIONS.colNavWidth = 2;
		OPTIONS.colOptWidth = 2;

		
		$("#btnNavUpdate").click(function(){
			updateNavList();
		});

		$(".swText_H1").focusout(function(){
			updateNavList();
		})

		function updateNavList(){
			$("#swNavList").html("");
			var firstLoop = 0;
			$("#swContent").find(".swText_H1").each(function(){
				var $curEl = $(this);
				firstLoop += 1;
				if (firstLoop >1){
					var str = "<p>"+$curEl.text()+"</p>";
					$("#swNavList").html($("#swNavList").html() + str);
					var str = "<p>"+$curEl.text()+"</p>";
				}
			})
		}

		$("#btnNewText").click(function(){
			elX = $(this).parent().parent().find("#swContent_X").clone(true);
			Nel = $("#swContent").find(".swText_Feld").length;
			elX.attr("id", "swContent_"+Nel);
			elX.appendTo("#swContent").show();
			$("#swContent").find("#swContent_"+Nel).find(".swText_H1").text( Nel + ". Ueberschrift");

			updateNavList();
		});

		$(".btnRemoveContent").click(function(){
			$(this).parent().remove();
			updateNavList();
		});

		$(".btnHideContent").click(function(){
			$(this).parent().find('.swText_Feld').toggle();
			if ($(this).parent().find('.swText_Feld').css('display')=='none')
			{
				$(this).parent().find('.btnHideContent').text('▼');
			} else {
				$(this).parent().find('.btnHideContent').text('▲');
			}
			console.log('click')

		});

		$("#btnMenuWindows").click(function(){
			if ($("#swColMainProject").css('display') == 'none'){
				$("#swColMainProject").show();
				$("#swColMainNav").show();
			}
			else{
				$("#swColMainProject").hide();
				$("#swColMainNav").hide();
			}
			updateMainColWidth();
		});

		$("#btnMenuOptions").click(function(){
			if ($("#swColMainOptions").css('display') == 'none'){
				$("#swColMainOptions").show();
			}
			else{
				$("#swColMainOptions").hide();
			}
			updateMainColWidth();
		});

		$("#swColOptBig").click(function(){
			if (OPTIONS.colOptWidth <4){
			OPTIONS.colOptWidth +=2
			$("#swColOptBig").text(">");
			}
			else{
			OPTIONS.colOptWidth = 2;
			$("#swColOptBig").text("<");
			}
			updateMainColWidth();
		});

		$("#swColNavBig").click(function(){
			if (OPTIONS.colNavWidth <4){
			OPTIONS.colNavWidth +=2
			$("#swColNavBig").text("<");
			}
			else{
			OPTIONS.colNavWidth = 2;
			$("#swColNavBig").text(">");
			}
			updateMainColWidth();
		});

		$("#swColProjBig").click(function(){
			if (OPTIONS.colProjWidth <4){
			OPTIONS.colProjWidth +=2
			$("#swColProjBig").text("<");
			}
			else{
			OPTIONS.colProjWidth = 2;
			$("#swColProjBig").text(">");
			}
			updateMainColWidth();
		});

		$("#swColProjClose").click(function(){
			$("#swColMainProject").hide();
			updateMainColWidth();
		});

		$("#swColNavClose").click(function(){
			$("#swColMainNav").hide();
			updateMainColWidth();
		});

		$("#swColOptClose").click(function(){
			$("#swColMainOptions").hide();
			updateMainColWidth();
		});

		function updateMainColWidth(){
			if ($("#swColMainOptions").css('display') == 'none')
				colOpt = 0;
			else
				colOpt = OPTIONS.colOptWidth;

			if ($("#swColMainProject").css('display') == 'none')
				colProj = 0;
			else
				colProj = OPTIONS.colProjWidth;

			if ($("#swColMainNav").css('display') == 'none')
				colNav = 0;
			else
				colNav = OPTIONS.colNavWidth;

			//now remove class and set new
			$("#swColMainProject").removeClass($("#swColMainProject").attr('class'));
			$("#swColMainProject").addClass("col-sm-"+colProj);

			$("#swColMainNav").removeClass($("#swColMainNav").attr('class'));
			$("#swColMainNav").addClass("col-sm-"+colNav);

			$("#swColMainOptions").removeClass($("#swColMainOptions").attr('class'));
			$("#swColMainOptions").addClass("col-sm-"+colOpt);

			var colW = 12-(colOpt+colNav+colProj);
			$("#swColMainEditor").removeClass($("#swColMainEditor").attr('class'));
			$("#swColMainEditor").addClass("scrollableCol col-sm-"+colW);
		}


		updateNavList();
	</script>


  </body>
</html>